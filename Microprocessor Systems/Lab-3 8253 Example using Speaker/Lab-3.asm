
STAK    SEGMENT PARA STACK 'STACK'
        DW 20 DUP(?)
STAK    ENDS

DATA    SEGMENT PARA 'DATA'
NOTALAR		DW 220,220,220,174,261,220,174,261,220,329,329,329,349,261,207,174,261,220,440,220,220,440,415,392,369,329,349,0,233,311,293,277,261,246,261,0,174,207,174,220
SURELER		DW 4,4,4,3,1,4,3,1,8,4,4,4,3,1,4,3,1,8,4,3,1,4,3,1,1,1,2,2,2,4,3,1,1,1,2,2,2,4,3,1
NOTASAYISI	DW 40
DATA    ENDS

CODE    SEGMENT PARA 'CODE'
        ASSUME CS:CODE, DS:DATA, SS:STAK

	
ANA	PROC FAR
        MOV AX, DATA
	MOV DS, AX
	
	MOV AL,00110110B
	OUT 0AFH,AL
	
ENDLESS:
	XOR SI,SI
	MOV CX, NOTASAYISI
	
DIS:	
	CALL CNTR
	OUT 0A9H,AL
	MOV AL,AH
	OUT 0A9H,AL
	MOV BX,SURELER[SI]
IC:	CALL DELAY
	DEC BX
	CMP BX,0H
	JNE IC
	
	ADD SI,2H
	LOOP DIS
	XOR AX,AX
	OUT 0A9H,AL
	MOV AL,AH
	OUT 0A9H,AL
	CALL DELAY
	CALL DELAY
	CALL DELAY 
	JMP ENDLESS
	
	RETF
ANA	ENDP

DELAY	PROC NEAR
	PUSH CX 
	MOV CX,2FFFH
DON:	
	LOOP DON
	POP CX
	RET
DELAY	ENDP	

CNTR	PROC NEAR	; CLK'ya verilen frekans değerini SI ile alınan dizideki frekans değerine böler ve sayma değerini bulur
	PUSH DX
	PUSH BX
	MOV AX,0A980H
	MOV DX,3H
	MOV BX,NOTALAR[SI]
	CMP BX,0
	JE L1
	DIV BX
	JMP SON
L1:	MOV AX,0	
SON:	POP BX
	POP DX
	RET
CNTR	ENDP


CODE    ENDS
        END ANA