
STACK    SEGMENT PARA STACK 'STACK'
        DW 20 DUP(?)
STACK    ENDS

DATA    SEGMENT PARA 'DATA'
MYDAT    DB 20 DUP(0)
DATA    ENDS

CODE    SEGMENT PARA 'CODE'
        ASSUME CS:CODE, DS:DATA, SS:STACK
START PROC
        MOV AX, DATA
	MOV DS, AX
	
ENDLESS:
	XOR CX,CX
	XOR AX,AX
	
TEKRAR_OKU:	
	MOV DX, 6AH
	OUT DX, AL	;Cihazda dönüşüm başladı
	
	MOV DX, 68H
KONTROL:
	IN AL, DX	;INTR Ucunun 0'a dönmesini kontrol et 
	TEST AL, 80H
	JNZ KONTROL
	
	MOV DX, 6AH	;ADC'den dönüştürlen veriyi AL'ye al
	IN AL,DX
	CALL DELAY
	
	CMP CL,AL
	JE TEKRAR_OKU
	MOV CL,AL
	
	MOV BL,0FFH
	XCHG AL,BL
	SUB AL,BL
	
	
	MOV DX, 62H
	OUT DX,AL
	
	
JMP ENDLESS
RET
START ENDP
DELAY	PROC NEAR
	PUSH CX
	MOV CX,00FFH
L1:	
	LOOP L1
	POP CX
	RET
DELAY	ENDP
	
CODE    ENDS
        END START